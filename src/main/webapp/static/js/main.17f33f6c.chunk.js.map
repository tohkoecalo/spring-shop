{"version":3,"sources":["components/CartRow.js","pages/cart.jsx","components/Product.js","pages/catalog.jsx","pages/payment.jsx","pages/after_issuer.jsx","pages/status.jsx","pages/error.jsx","pages/form.jsx","components/Header.js","App.js","reportWebVitals.js","index.js"],"names":["CartRow","this","props","product","price","React","Component","CartPage","renderCart","item","key","name","amount","state","counter","cart","cartItems","JSON","parse","localStorage","getItem","setState","setItem","stringify","update","draw","window","location","reload","total","i","length","className","scope","map","to","pathname","getCartAmount","type","onClick","clearCart","Product","addToCart","isAddedToCart","push","isAdded","forEach","element","isItemAdded","src","alt","description","disabled","CatalogPage","renderProds","index","isFetching","products","fetch","then","response","json","bind","catch","error","console","log","PaymentPage","handleInputFocus","e","focus","target","card","number","expiry","cvv","is3dsEnrolled","event","value","replace","slice","document","getElementById","Promise","resolve","reject","prepareCardForOrder","requestOptions","method","headers","body","status","text","href","cardFor3ds","_this","nextUrl","termUrl","pareq","form","createElement","action","innerHTML","btoa","append","submit","createOrder","check3ds","getPareq","url","id","cvc","focused","ref","c","placeholder","maxLength","onChange","handleCardNumberChanged","onFocus","required","handleExpiryChanged","handleCardCvvChanged","runPurchase","AfterIssuerPage","getStatus","StatusPage","ReactDOM","render","ErrorPage","params","URL","searchParams","has","get","getMessage","FormPage","Header","cartSize","getCartSize","cartCounter","makeAutoObservable","CounterView","observer","App","exact","from","path","component","OrderStatus","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","StrictMode"],"mappings":"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","file":"static/js/main.17f33f6c.chunk.js","sourcesContent":["import React from 'react';\nimport '../css/index.css';\n\nclass CartRow extends React.Component {\n    render() {\n        return (\n            <tr>\n                <td>{this.props.product}</td>\n                <td>{this.props.price}</td>\n            </tr>\n        );\n    }\n}\n\nexport default CartRow;","import React from \"react\";\nimport CartRow from \"../components/CartRow\"\nimport '../css/index.css';\nimport { Link } from \"react-router-dom\";\n\nclass CartPage extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            counter: this.props.counter,\n            cart: []\n        }\n    }\n\n    componentDidMount() {\n        var cartItems = JSON.parse(localStorage.getItem('cart')) || [];\n        this.setState({\n            cart: cartItems\n        });\n    }\n\n    renderCart = (item, key) => {\n        return <CartRow key={key} product={item.name} amount={1} price={1 * item.price + \"$\"} />\n    }\n\n    clearCart() {\n        localStorage.setItem('cart', JSON.stringify([]));\n        this.state.counter.update();\n        this.state.counter.draw();\n        window.location.reload(false);\n    }\n\n    getCartAmount() {\n        var total = 0;\n        for (var i = 0; i < this.state.cart.length; i++) {\n            total += this.state.cart[i].price\n        }\n        return total\n    }\n\n    render() {\n        var cartItems = JSON.parse(localStorage.getItem('cart')) || [];\n        if (cartItems.length === 0) {\n            return(<h5 className=\"h5-order\">Your cart is empty</h5>);\n        } else {\n            return (\n                <>\n                    <table className=\"table table-striped\">\n                        <thead>\n                            <tr>\n                                <th scope=\"col\">Product</th>\n                                <th scope=\"col\">Price</th>\n                            </tr>\n                        </thead>\n                        <tbody>\n                            {this.state.cart.map(this.renderCart)}\n                        </tbody>\n                    </table>\n                    <form>\n                        <div className=\"row\">\n                            <div className=\"col-6\">\n                                <Link to={{\n                                    pathname: \"/payment\",\n                                    state: {\n                                        amount: this.getCartAmount()\n                                    }\n                                }}><button type=\"button\" className=\"btn btn-outline-success form-control\">Purchase</button></Link>\n                            </div>\n                            <div className=\"col-6\">\n                                <button type=\"button\" className=\"btn btn-outline-danger form-control\" onClick={() => this.clearCart()}>Clear</button>\n                            </div>\n                        </div>\n                    </form>\n                </>\n            );\n        }\n    }\n}\n\nexport default CartPage;\n","import React from 'react';\nimport '../css/index.css';\n\nclass Product extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      counter: this.props.counter,\n      name: this.props.item.name,\n      isAddedToCart: false\n    }\n  }\n\n  componentDidMount() {\n    var cartItems = JSON.parse(localStorage.getItem('cart')) || [];\n    var isAdded = 'false'\n    cartItems.forEach(element => {\n      if (element.name === this.props.item.name) {\n        isAdded = 'true';\n      }\n    });\n    const isItemAdded = isAdded === 'true'; //cringe but works\n    this.setState({\n      isAddedToCart: isItemAdded\n    });\n  }\n\n  addToCart = (product) => {\n    this.setState({\n      isAddedToCart: true\n    });\n    var cartItems = JSON.parse(localStorage.getItem('cart')) || [];\n    cartItems.push(product);\n    localStorage.setItem('cart', JSON.stringify(cartItems));\n    this.state.counter.update();\n    this.state.counter.draw();\n  }\n\n  render() {\n    const isAdded = this.state.isAddedToCart;\n    return (\n      <div className=\"product-item card\">\n        <img src=\"placeholder_vertical.png\" className=\"card-img-top\" alt=\"placeholder\"></img>\n        <div className=\"card-body\">\n          <h5 className=\"card-title\">{this.props.item.name}</h5>\n          <p className=\"card-text\">{this.props.item.description}</p>\n          {!isAdded && <button className=\"btn btn-outline-primary\" onClick={() => this.addToCart(this.props.item)}>Add to cart</button>}\n          {isAdded && <button className=\"btn btn-primary\" disabled>Added</button>}\n          <b className=\"price\">{this.props.item.price}$</b>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Product;","import React from \"react\";\nimport Product from \"../components/Product\";\nimport '../css/index.css';\n\nclass CatalogPage extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            counter: this.props.counter,\n            isFetching: false,\n            products: []\n        }\n    }\n\n    componentDidMount() {\n        this.setState({ isFetching: true });\n        fetch(\"/products\")\n            .then(function (response) {\n                return response.json();\n            })\n            .then(function (json) {\n                this.setState({\n                    products: json,\n                    isFetching: false\n                });\n            }.bind(this))\n            .catch((error) => {\n                console.log(error);\n            });\n    }\n\n    renderProds = (item, index) => {\n        return <Product key={index} item={item} counter={this.state.counter}/>\n    }\n\n    render() {\n        if (this.state.isFetching) return <div>Loading...</div>;\n        return (\n            <div className=\"products\">\n                <div className=\"product-group\">\n                    {this.state.products.map(this.renderProds)}\n                </div>\n            </div> \n        )\n    }\n}\n\nexport default CatalogPage;\n","import React from \"react\";\nimport '../css/index.css';\nimport { Link } from \"react-router-dom\";\nimport Cards from 'react-credit-cards';\nimport 'react-credit-cards/es/styles-compiled.css';\nimport ReactDOM from \"react-dom\"\n\nexport default class PaymentPage extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            focus: \"\",\n            card: {\n                number: \"\",\n                expiry: \"\",\n                cvv: \"\",\n                name: \"Compass plus\",\n                is3dsEnrolled: false\n            },\n            amount: props.location.state.amount || 0\n        };\n\n    }\n\n    handleInputFocus = (e) => {\n        this.setState({ focus: e.target.name });\n    }\n\n    handleCardNumberChanged(event) {\n        var card = this.state.card;\n        card.number = event.target.value;\n\n        this.setState({ card: card });\n    }\n\n    handleExpiryChanged(event) {\n        var card = this.state.card;\n        card.expiry = event.target.value;\n        card.expiry = card.expiry.replace('/', '');\n        if (card.expiry.length >= 3) {\n            card.expiry = `${card.expiry.slice(0, 2)}/${card.expiry.slice(2, 4)}`;\n        }\n\n        this.setState({ card: card });\n        document.getElementById('expiry').value = card.expiry\n    }\n\n    handleCardCvvChanged(event) {\n        var card = this.state.card;\n        card.cvv = event.target.value;\n\n        this.setState({ card: card });\n    }\n\n    prepareCardForOrder() {\n        var card = this.state.card;\n        card.expiry = card.expiry.replace('/', '');\n        card.expiry = `${card.expiry.slice(2, 4)}${card.expiry.slice(0, 2)}`;\n        this.setState({ card: card });\n    }\n\n    createOrder() {\n        return new Promise((resolve, reject) => {\n            this.prepareCardForOrder();\n            const requestOptions = {\n                method: 'POST',\n                headers: { 'Content-Type': 'application/json' },\n                body: JSON.stringify({ amount: this.state.amount * 100, card: this.state.card })\n            };\n            fetch(\"http://localhost:8081/order/create/\", requestOptions)\n                .then(function (response) {\n                    if (response.status === 200) {\n                        return response.text();\n                    } else {\n                        window.location.href = \"http://localhost:8081/error?message=Error while creating your order\"\n                    }\n                })\n                .then(function (text) {\n                    localStorage.setItem('orderId', text);\n                    localStorage.setItem('cart', JSON.stringify([]));\n                })\n                .then((value) => resolve(value))\n        })\n    }\n\n    check3ds() {\n        return new Promise((resolve, reject) => {\n            var cardFor3ds = this.state.card;\n            var _this = this;\n            fetch(\"http://localhost:8081/order/check3ds?orderId=\" + localStorage.getItem('orderId'))\n                .then(function (response) {\n                    if (response.status === 200) {\n                        return response.text();\n                    } else {\n                        window.location.href = \"http://localhost:8081/error?message=Error while checking 3DSecure of your card\"\n                    }\n                })\n                .then(function (text) {\n                    if (text === 'true') {\n                        cardFor3ds.is3dsEnrolled = true;\n                        _this.state.card.is3dsEnrolled = true;\n                    }\n                })\n                .then((value) => resolve(value))\n\n        })\n    }\n\n    getPareq(nextUrl, termUrl, pareq) {//send pares to server \n        let form = document.createElement('form');\n        form.action = nextUrl;\n        form.method = \"POST\";\n        form.innerHTML = \"<input name=\\\"MD\\\" value=\\\"\" + window.btoa(localStorage.getItem('orderId')) + \"\\\" hidden>\" + \n            \"<input name=\\\"TermUrl\\\" value=\\\"\"+ termUrl + \"\\\" hidden>\" + \n            \"<input name=\\\"PaReq\\\" value=\\\"\"+ pareq + \"\\\" hidden>\";\n        document.body.append(form);\n        form.submit();\n    }\n\n    runPurchase() {\n        var _this = this;\n        this.createOrder()\n            .then(function () {\n                _this.check3ds()\n                    .then(function () {\n                        if (_this.state.card.is3dsEnrolled) {\n                            fetch(\"http://localhost:8081/order/getpareq?orderId=\" + localStorage.getItem('orderId'))\n                                .then(function (response) {\n                                    if (response.status === 200){\n                                        return response.json();\n                                    } else {\n                                        window.location.href = \"http://localhost:8081/error?message=Error while processing order\"\n                                    }\n                                    \n                                })\n                                .then(function (json) {\n                                    var redirectUrl = \"http://localhost:8081/order/after_issuer\";\n                                    _this.getPareq(json.url, redirectUrl, json.pareq);\n                                })\n                        } else {\n                            const requestOptions = {\n                                method: 'POST'\n                            };\n                            fetch(\"http://localhost:8081/order/purchase?orderId=\" + localStorage.getItem('orderId'), requestOptions)\n                                .then(function (response) {\n                                    if (response.status === 200){\n                                        return response.json();\n                                    } else {\n                                        window.location.href = \"http://localhost:8081/error?message=Error while purchasing\"\n                                    }                               \n                                })\n                        }\n                    })\n            })\n    }\n\n    render() {\n        return (\n            <>\n                <h5 className=\"h5-order\">Order amount: {this.state.amount}</h5>\n                <div id=\"PaymentForm\" className=\"card-preview\">\n                    <Cards\n                        cvc={this.state.card.cvv}\n                        expiry={this.state.card.expiry}\n                        focused={this.state.focus}\n                        name={this.state.card.name}\n                        number={this.state.card.number}\n                    />\n                    <form ref={c => (this.form = c)}>\n                        <div className=\"form-group form-inputs\">\n                            <input\n                                type=\"tel\"\n                                name=\"number\"\n                                className=\"form-control\"\n                                placeholder=\"Card Number\"\n                                maxLength=\"19\"\n                                onChange={this.handleCardNumberChanged.bind(this)}\n                                onFocus={this.handleInputFocus}\n                            />\n                        </div>\n                        <div className=\"row form-inputs\">\n                            <div className=\"col-6\">\n                                <input\n                                    id=\"expiry\"\n                                    type=\"tel\"\n                                    name=\"expiry\"\n                                    className=\"form-control\"\n                                    placeholder=\"Valid Thru\"\n                                    maxLength=\"5\"\n                                    required\n                                    onChange={this.handleExpiryChanged.bind(this)}\n                                    onFocus={this.handleInputFocus}\n                                />\n                            </div>\n                            <div className=\"col-6\">\n                                <input\n                                    type=\"tel\"\n                                    name=\"cvc\"\n                                    className=\"form-control\"\n                                    placeholder=\"CVV\"\n                                    maxLength=\"4\"\n                                    required\n                                    onChange={this.handleCardCvvChanged.bind(this)}\n                                    onFocus={this.handleInputFocus}\n                                />\n                            </div>\n                        </div>\n                        <div>\n                            <div className=\"row\">\n                                <div className=\"col-6\">\n                                    <button type=\"button\" className=\"btn btn-outline-success form-control\" onClick={() => this.runPurchase()}>Pay</button>\n                                </div>\n                                <div className=\"col-6\">\n                                    <Link to=\"/catalog\"><button type=\"button\" className=\"btn btn-outline-danger form-control\">Cancel</button></Link>\n                                </div>\n                            </div>\n                        </div>\n                    </form>\n                </div>\n            </>\n        );\n    }\n}","import React from \"react\";\nimport '../css/index.css';\n\nclass AfterIssuerPage extends React.Component {\n    getStatus() {\n        fetch(\"/order/after_issuer?orderId=\"  + localStorage.getItem('orderId'))\n            .then(function(response) {\n                return response.text();\n            }) \n            .then(function(text) {\n                window.location.href = \"http://localhost:8081/status?status=\" + text;\n            })\n    }\n\n    render() {\n        return (\n            <>\n                {this.getStatus()}  \n            </>\n        )\n    }\n}\n\nexport default AfterIssuerPage;\n","import React from \"react\";\nimport '../css/index.css';\nimport ReactDOM from \"react-dom\"\n\nclass StatusPage extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            status: 'Wrong'\n        };\n\n    }\n    componentWillMount() {\n        var _this = this;\n        fetch(\"http://localhost:8081/order/getStatus?orderId=\" + localStorage.getItem('orderId'))\n            .then(function (response) {\n                return response.text();\n            })\n            .then(function (text) {\n                _this.state.status = text\n                ReactDOM.render(<p >Order status: { text } </p>, document.getElementById(\"status\"))\n            })\n    }\n\n    render() {\n        return (\n            <>\n                <div id=\"status\"/>\n            </>\n        )\n    }\n}\n\nexport default StatusPage;\n","import React from \"react\";\nimport '../css/index.css';\n\nclass ErrorPage extends React.Component {\n    getMessage(){\n        const params = new URL(window.location.href).searchParams;\n        if (params.has('message')){\n            return params.get('message')\n        }\n        return \"Unknown internal error\"\n    }\n\n    render() {\n        return (\n            <>\n                <p>{ this.getMessage()} </p>\n            </>\n        )\n    }\n}\n\nexport default ErrorPage;\n","import React from \"react\";\nimport '../css/index.css';\n\nclass FormPage extends React.Component {\n    render() {\n        return (\n            <>\n                <div id=\"form\"/>\n            </>\n        )\n    }\n}\n\nexport default FormPage;\n","import React from 'react';\nimport '../css/index.css';\nimport { Link } from \"react-router-dom\";\n\nclass Header extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            counter: this.props.counter\n        }\n    }\n\n    componentDidUpdate() {\n        var cartItems = JSON.parse(localStorage.getItem('cart')) || [];\n        this.setState({\n            cartSize: cartItems.length \n        });\n    }\n\n    getCartSize(){\n        var cartItems = JSON.parse(localStorage.getItem('cart')) || [];\n        return  cartItems.length\n    }\n\n    render() {\n        return (\n            <div className=\"navbar navbar-light navbar-fixed-top nav\">\n                <div className=\"container\">\n                    <Link to=\"/catalog\" className=\"navbar-brand nav-p\">Shop</Link>\n                    <Link to=\"/cart\" className=\"navbar-brand text-right\"><b className=\"cart-size\" id=\"counter\">{this.getCartSize()}</b><img src=\"cart.png\" className=\"nav-img\" alt=\"Cart\" /></Link>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default Header;","import './App.css';\nimport './css/index.css';\nimport React from 'react';\nimport { BrowserRouter as Router, Route, Switch, Redirect } from \"react-router-dom\";\n\nimport CartPage from \"./pages/cart\";\nimport CatalogPage from \"./pages/catalog\";\nimport PaymentPage from \"./pages/payment\";\nimport AfterIssuerPage from \"./pages/after_issuer\";\nimport OrderStatus from \"./pages/status\";\nimport ErrorPage from \"./pages/error\";\nimport FormPage from \"./pages/form\";\nimport Header from \"./components/Header\"\nimport ReactDOM from \"react-dom\"\nimport { observer } from \"mobx-react-lite\"\nimport { makeAutoObservable } from \"mobx\"\n\nclass Counter {\n  cartSize = 0\n\n  constructor() {\n    makeAutoObservable(this)\n  }\n\n  update() {\n    var cartItems = JSON.parse(localStorage.getItem('cart')) || [];\n    this.cartSize = cartItems.length;\n  }\n\n  draw() {\n    ReactDOM.render(<CounterView counter={this} />, document.getElementById(\"counter\"))\n  }\n}\n\nconst cartCounter = new Counter()\nconst CounterView = observer(({ counter }) => <b>{counter.cartSize}</b>)\n\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    var cartItems = JSON.parse(localStorage.getItem('cart')) || [];\n    this.state = {\n      cartSize: cartItems.length\n    }\n  }\n\n  render() {\n    return (\n      <>\n        <Router>\n          <Header counter={cartCounter} />\n          <div className=\"container\">\n            <Switch>\n              <Redirect exact from=\"/\" to=\"/catalog\" />\n              <Route\n                path=\"/cart\"\n                render={() => (\n                  <CartPage counter={cartCounter} />\n                )}\n              ></Route>\n              <Route\n                path=\"/catalog\"\n                render={() => (\n                  <CatalogPage counter={cartCounter} />\n                )}\n              ></Route>\n              <Route path=\"/order/after_issuer\" component={AfterIssuerPage}></Route>\n              <Route path=\"/status\" component={OrderStatus}></Route>\n              <Route path=\"/form\" component={FormPage}></Route>\n              <Route path=\"/error\" component={ErrorPage}></Route>\n              <Route name=\"payment\" component={PaymentPage}></Route>\n              <Redirect to=\"/catalog\"></Redirect>\n            </Switch>\n          </div>\n        </Router>\n      </>\n    )\n  };\n}\n\nexport default App;","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}